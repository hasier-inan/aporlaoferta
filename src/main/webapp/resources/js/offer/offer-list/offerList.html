<section id="contentFilter" class="wrapper style2 special" ng-offer-filter="offerFilter"
         offer-list="offerList" selection="defaultList" offer-filter="offerFilter"></section>

<section id="promotion_list" class="wrapper style2">
    <div class="inner alt">
        <div ng-repeat="offer in offerList | unique: 'offer.id'">
            <section class="spotlight" ng-class="offer.offerExpired?'offer-expired':''">
                <div class="offer-image-presentation">
                    <div class="offerImageAndFeedback">
                        <div class="centeredForm">
                            <svg viewBox="0 0 12 30" width="10" height="18" class="termometer" ng-class="offerFeedbackStyle(offer)"> enable-background="new -0.2 0 18 30" height="30px" version="1.1" viewBox="-0.2 0 18 30" width="18px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs/><path clip-rule="evenodd" d="M8.6,29.8c-4.8,0-8.6-3.9-8.6-8.6c0-3.1,1.6-5.8,4-7.3V4.5  C4,2,6.1,0,8.5,0S13,2,13,4.5v9.2c2.5,1.5,4.2,4.3,4.2,7.4C17.3,25.9,13.4,29.8,8.6,29.8z M11.3,15.4L11.1,5c0-1.2-1.4-2.1-2.6-2.1  S6,3.8,6,5l0,10.5c-2.1,1-3.6,3.2-3.6,5.7c0,3.5,2.8,6.3,6.3,6.3c3.5,0,6.3-2.8,6.3-6.3C15,18.6,13.5,16.4,11.3,15.4z M8.6,25.9  c-2.6,0-4.7-2.1-4.7-4.7c0-2,1.3-3.7,3.1-4.4V8h3v8.8c1.9,0.6,3.3,2.3,3.3,4.4C13.3,23.8,11.2,25.9,8.6,25.9z" fill-rule="evenodd"/></svg>
                            <g id="icon-image">
                                <path class="path1" d="M0 4v26h32v-26h-32zM30 28h-28v-22h28v22zM22 11c0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3-1.657 0-3-1.343-3-3zM28 26h-24l6-16 8 10 4-3z"></path>
                            </g>
                            <div class="offerListFeedback feedbackSumatory">
                                <h1 class="feedbackSumatory ng-binding" ng-class="offerFeedbackStyle(offer)">{{offer.offerPositiveVote -
                                    offer.offerNegativeVote |
                                    number:0}}º</h1>
                            </div>
                        </div>
                        <div class="image offerImage">
                            <div class="offer-image-expired" ng-show="offer.offerExpired"></div>
                            <img ng-src="{{offer.offerImage}}" alt="" ng-click="showSpecifications(offer.id)"
                                 ng-class="offer.offerExpired?'offer-expired':offerFeedbackStyle(offer)"/>
                        </div>
                    </div>
                    <div class="offer-call-to-actions">
                        <a class="button icon small--rounded hvr-icon-forward fa-sign-in more-detail-cta" ng-click="showSpecifications(offer.id)">
                            M&aacute;s
                            detalle
                        </a>
                        <a class="button icon small--rounded hvr-icon-pulse-grow offer-cta fa-fire"
                           href="{{offer.offerLink}}" target="_blank">Obtener oferta</a>
                    </div>
                </div>
                <div class="content">
                    <div class="offerSpecificationsSubtitle">
                        <img ng-src="{{offer.offerUser.userAvatar}}"/>

                        <div class="offerCreatedDate created-date-list">{{offer.offerCreatedDate | date:'MM/dd/yyyy
                            @h:mma'}}
                        </div>
                    </div>
                    <h3 class="offer-title" ng-class="offer.offerExpired?'offer-expired':''">
                        <div>
                            <span>{{offer.offerTitle  | characters:120}}</span>
                            <span> - {{parsePrice(offer.finalPrice)}}€</span>
                        </div>
                        <div class="offerCompanyInTitle">
                            <i class="fa fa-tag" aria-hidden="true"></i>
                            {{offer.offerCompany.companyName}}
                        </div>
                    </h3>
                    <p class="offerDescription">
                    <pre class="parsed-text list short-description">{{offer.offerDescription | characters:400}}</pre>
                    </p>

                    <div class="offer-call-to-actions">
                        <a class="button icon small--rounded hvr-icon-pulse-grow offer-cta fa-fire"
                           href="{{offer.offerLink}}" target="_blank">Obtener oferta</a>
                        <a class="button icon small--rounded hvr-icon-forward fa-sign-in more-detail-cta" ng-click="showSpecifications(offer.id)">
                            M&aacute;s
                            detalle
                        </a>
                    </div>
                </div>
            </section>
            <div ng-if="$last" class="more-offers-container">
                <button class="button small icon fa-cart-plus whiteButton get-offer more-offers-button"
                        ng-init="updateIndex($index)"
                        ng-class="!moreOffersLoading?'':'hideLoading'"
                        ng-click="showMoreOffers(lastOffer)">M&aacute;s ofertas
                </button>
            </div>
        </div>
    </div>
    <div ng-hide="offerList.length>0" class="no-offers">
        <i class="fa no-offers">:</i><i class="fa fa-cart-plus no-offers">(</i>

        <p>No hay ofertas que mostrar</p>
    </div>
    <div class="more-offers-container--centered">
        <button class="button small icon fa-cart-plus whiteButton get-offer more-offers-button"
                ng-class="!moreOffersLoading?'':'hideLoading'"
                ng-click="showMoreOffers(lastOffer)">M&aacute;s ofertas
        </button>
    </div>

    <div class="loading-dialogue">
        <i class="fa fa-refresh loadingdialogue grey" ng-class="!moreOffersLoading?'hideLoading':''"></i>
    </div>
</section>